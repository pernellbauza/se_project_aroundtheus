!function(){"use strict";class e{constructor(e,t,n){let{name:s,link:o}=e;this._name=s,this._link=o,this._cardSelector=t,this._handleCardClick=n}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card__list").cloneNode(!0),this._cardElement.querySelector(".card__title").innerText=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButton=this._formElement.querySelector(e.submitButtonSelector),this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)]}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=""}_checkFormValidity(){return this._inputElements.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._popupElementCloseBtn=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class s extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){return this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._popupForm.reset(),super.close()}}const o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=(document.querySelector(".cards__list"),document.querySelector("#profile-edit-button")),i=document.querySelector("#profile-edit-modal"),l=document.querySelector("#add-card-modal"),a=(document.querySelector("#preview-image-modal"),document.querySelector("#profile-title")),c=document.querySelector("#profile-description"),u=l.querySelector(".modal__form"),d=(document.querySelector(".card"),document.querySelectorAll(".modal"),document.querySelector("#profile-close-button"),document.querySelector("#card-close-button"),document.querySelector(".profile__add-button")),m=new class{constructor(e,t){this.name=e,this.description=t}getUserInfo(){return{description:this.description.textContent,name:this.name.textContent}}setUserInfo(e,t){this.name.textContent=e,this.description.textContent=t}}(a,c),_=document.querySelector("#profile-description-input"),p=document.querySelector("#profile-title-input"),h=(u.querySelector(".modal__input_type_title"),u.querySelector(".modal__input_type_link"),new t(o,i.querySelector(".modal__form"))),E=new t(o,u);h.enableValidation(),E.enableValidation();const S=new s("#add-card-modal",(function(e){v({name:e.title,link:e.link}),S.close()}));S.setEventListeners();const y=new s("#profile-edit-modal",(function(e){m.setUserInfo(e.name,e.description),y.close()}));y.setEventListeners();const v=t=>{const n=new e(t,"#card-template",q);f.addItem(n.getView())},f=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t),console.log(this._container)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:v},".card");f.renderItems();const g=new class extends n{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__image"),this._previewText=this._popupElement.querySelector(".modal__preview-title")}open(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._previewText.textContent=e,super.open()}}("#preview-image-modal");function q(e,t){g.open(e,t)}g.setEventListeners(),r.addEventListener("click",(function(){!function(){const e=m.getUserInfo();p.value=e.name,_.value=e.description}(),y.open()})),d.addEventListener("click",(()=>{E.toggleButtonState(),S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDRUQsS0FBTSxpQkFDTkMsS0FBTSw0R0FFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0scUdBRVIsQ0FDRUQsS0FBTSx3QkFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLG1HQ21FTjBHLFNBQVVULEdEMURrQixTQytEaENLLEVBQVlVLGNBSVosTUFBTUcsRUFBb0IsSUdqR1gsY0FBNkJ6RCxFQUMxQy9ELFdBQUFBLENBQVlnRSxHQUNWYSxNQUFNLENBQUViLGtCQUNSMUQsS0FBS21ILFlBQWNuSCxLQUFLMkQsY0FBY3BELGNBQWMsaUJBQ3BEUCxLQUFLb0gsYUFBZXBILEtBQUsyRCxjQUFjcEQsY0FDckMsd0JBRUosQ0FFQXNELElBQUFBLENBQUsvRCxFQUFNQyxHQUNUQyxLQUFLbUgsWUFBWWhHLElBQU1wQixFQUN2QkMsS0FBS21ILFlBQVkvRixJQUFNdEIsRUFDdkJFLEtBQUtvSCxhQUFhMUUsWUFBYzVDLEVBQ2hDeUUsTUFBTVYsTUFDUixHSG1GMkMsd0JBRzdDLFNBQVNoRSxFQUFnQkMsRUFBTUMsR0FDN0JtSCxFQUFrQnJELEtBQUsvRCxFQUFNQyxFQUMvQixDQUpBbUgsRUFBa0JoRCxvQkF5Q2xCYSxFQUFrQnZFLGlCQUFpQixTQVBuQyxZQU5BLFdBQ0UsTUFBTTZHLEVBQWUvQixFQUFTRSxjQUM5QkcsRUFBa0JkLE1BQVF3QyxFQUFhdkgsS0FDdkM0RixFQUF3QmIsTUFBUXdDLEVBQWE5QixXQUMvQyxDQUdFK0IsR0FDQXBCLEVBQWlCckMsTUFDbkIsSUFLQXdCLEVBQWlCN0UsaUJBQWlCLFNBQVMsS0FDekNxRixFQUFpQjFDLG9CQUNqQjJDLEVBQWFqQyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpc3RcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLmlubmVyVGV4dCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgICBpZiAoaGFzSW52YWxpZElucHV0KSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudENsb3NlQnRuID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG5cbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY2FyZERhdGEgPSB7XG4gIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbn07XG5cbmV4cG9ydCBjb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZFwiO1xuXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07IiwiLy8gQWxsIGltcG9ydHNcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG4vL2ltcG9ydCB7IG9wZW5Qb3B1cCxcbi8vICBjbG9zZVBvcHVwLFxuLy8gIGhhbmRsZUNsb3NlUG9wdXBXaXRoT3V0c2lkZUNsaWNrIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG5cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsXG4gIGNhcmREYXRhLFxuICBjYXJkTGlzdFNlbGVjdG9yLFxuICBzZXR0aW5ncywgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGNhcmRzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKTtcbi8vIGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZExpc3RFTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbi8vIGNvbnN0IGNhcmRUZW1wbGF0ZSA9XG4vLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcblxuLyogQnV0dG9ucyBFbGVtZW50cyAqL1xuY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWNsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jbG9zZS1idXR0b25cIik7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuLy8gY29uc3QgY2xvc2VQcmV2aWV3QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcbi8vICAgXCIjcHJldmlldy1jbG9zZS1pbWFnZS1idXR0b25cIlxuLy8gKTtcblxuLyogRm9ybSBEYXRhIGNvbnN0Ki9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uKTtcblxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcbik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2xpbmtcIlxuKTtcbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcblxuLypGb3JtIFZhbGlkYXRpb24qL1xuXG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4vL2NvbnN0IGFkZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRGb3JtRWxlbWVudCk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtRWxlbWVudCk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBOZXcgUG9wdXB3aXRoZm9ybSBjb25zdFxuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIENyZWF0ZSBhbmQgcmVuZGVyIGNhcmRcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XG59O1xuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgfSxcbiAgY2FyZExpc3RTZWxlY3RvclxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9QcmV2aWV3IFBvcHVwIENvbnN0XG5cbmNvbnN0IGltYWdlUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XG5pbWFnZVByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBpbWFnZVByZXZpZXdQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG4vKkV2ZW50IEhhbmRsZXJzKi9cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZGF0YSkge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuZGVzY3JpcHRpb24pO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgLy9ldnQucHJldmVudERlZmF1bHQoKTtcbiAgLy9jb25zdCBuYW1lID0gY2FyZFRpdGxlSW5wdXQudmFsdWU7XG4gIC8vY29uc3QgbGluayA9IGNhcmRMaW5rSW5wdXQudmFsdWU7XG4gIC8vY29uc3QgZm9ybURhdGEgPSBfZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgLy9yZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9LCBjYXJkc1dyYXApO1xuICByZW5kZXJDYXJkKHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS5saW5rIH0pO1xuICAvL2NhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG5cbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIC8vY2xvc2VQb3B1cChhZGRDYXJkTW9kYWwpO1xuICAvL2FkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xuICAvL3N1Ym1pdEZvcm0obmV3Q2FyZCk7XG59XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgdXNlckluZm9EYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mb0RhdGEubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VySW5mb0RhdGEuZGVzY3JpcHRpb247XG59XG5cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlRm9ybSgpIHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufVxuXG4vKkV2ZW50IExpc3RlbmVycyovXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUZvcm0pO1xuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgY29uc29sZS5sb2codGhpcy5fY29udGFpbmVyKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wcmV2aWV3VGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctdGl0bGVcIlxuICAgICk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaW5uZXJUZXh0Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcG9wdXBFbGVtZW50Q2xvc2VCdG4iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlVGl0bGVJbnB1dCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImFkZENhcmRQb3B1cCIsImRhdGEiLCJyZW5kZXJDYXJkIiwidGl0bGUiLCJlZGl0UHJvZmlsZVBvcHVwIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaW1hZ2VQcmV2aWV3UG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wcmV2aWV3VGV4dCIsInVzZXJJbmZvRGF0YSIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=